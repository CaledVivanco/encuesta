<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Registro de Empresa</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input, textarea {
      width: 100%;
      padding: 5px;
      box-sizing: border-box;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
    }
  </style>
    <link rel="stylesheet" href="style.css" />
</head>
<body>

  <h1>Formulario de Empresa</h1>

  <form id="formEmpresa">
    <label>Fecha: <input type="date" name="fecha"></label>
    <label>Razón Social: <input type="text" name="nombre" required></label>
    <label>NIT: <input type="text" name="nit" required></label>
    <label>Localidad: <input type="text" name="localidad"></label>
    <label>Barrio: <input type="text" name="barrio"></label>
    <label>Dirección: <input type="text" name="direccion"></label>
    <label>Número de trabajadores: <input type="number" name="trabajadores"></label>
    <label>Actividad económica: <input type="text" name="actividad"></label>
    <label>Categoría de riesgo: <input type="text" name="riesgo"></label>
    <label>ARL afiliada: <input type="text" name="arl"></label>
    <label>Brinda asesoría: <input type="text" name="asesoria"></label>
    <label>Nombre de quien atiende: <input type="text" name="atendio"></label>
    <label>Teléfono: <input type="text" name="telefono"></label>
    <label>Correo: <input type="email" name="correo"></label>
<h3>Estándares mínimos del SG-SST</h3>
<label>1.1 Asignación persona que diseña SG-SST:
  <select name="1_1">
    <option value="">Seleccione</option>
    <option value="Cumple">Cumple</option>
    <option value="No cumple">No cumple</option>
    <option value="No informa">No informa</option>
  </select>
</label><br>

<label>1.2 Afiliación al sistema de seguridad social:
  <select name="1_2">
    <option value="">Seleccione</option>
    <option value="Cumple">Cumple</option>
    <option value="No cumple">No cumple</option>
    <option value="No informa">No informa</option>
  </select>
</label><br>
<label for="1_3">1.3 Capacitación en SST:</label><br>
<select name="1_3" id="1_3">
  <option value="">Seleccione</option>
  <option value="Cumple">Cumple</option>
  <option value="No cumple">No cumple</option>
  <option value="No informa">No informa</option>
</select><br><br>

<label for="1_4">1.4 Plan anual de trabajo:</label><br>
<select name="1_4" id="1_4">
  <option value="">Seleccione</option>
  <option value="Cumple">Cumple</option>
  <option value="No cumple">No cumple</option>
  <option value="No informa">No informa</option>
</select><br><br>


<label>1.5 Evaluaciones médicas ocupacionales:
  <select name="1_5">
    <option value="">Seleccione</option>
    <option value="Cumple">Cumple</option>
    <option value="No cumple">No cumple</option>
    <option value="No informa">No informa</option>
  </select>
</label><br>

<label>1.6 Identificación de peligros y evaluación de riesgos:
  <select name="1_6">
    <option value="">Seleccione</option>
    <option value="Cumple">Cumple</option>
    <option value="No cumple">No cumple</option>
    <option value="No informa">No informa</option>
  </select>
</label><br>

<label>1.7 Medidas de prevención/control:
  <select name="1_7">
    <option value="">Seleccione</option>
    <option value="Cumple">Cumple</option>
    <option value="No cumple">No cumple</option>
    <option value="No informa">No informa</option>
  </select>
</label><br>

<h3>Normatividad laboral y SST</h3>
<label>2.1 Autoevaluación circular 0082:
  <select name="2_1">
    <option value="">Seleccione</option>
    <option value="Cumple">Cumple</option>
    <option value="No cumple">No cumple</option>
    <option value="No informa">No informa</option>
  </select>
</label><br>

<label>2.2 Política de desconexión laboral:
  <select name="2_2">
    <option value="">Seleccione</option>
    <option value="Cumple">Cumple</option>
    <option value="No cumple">No cumple</option>
    <option value="No informa">No informa</option>
  </select>
</label><br>

<label>2.3 Política de prevención de acoso:
  <select name="2_3">
    <option value="">Seleccione</option>
    <option value="Cumple">Cumple</option>
    <option value="No cumple">No cumple</option>
    <option value="No informa">No informa</option>
  </select>
</label><br>

<label>2.4 Política de equidad de género:
  <select name="2_4">
    <option value="">Seleccione</option>
    <option value="Cumple">Cumple</option>
    <option value="No cumple">No cumple</option>
    <option value="No informa">No informa</option>
  </select>
</label><br>

<label>2.5 Inclusión de personas con discapacidad:
  <select name="2_5">
    <option value="">Seleccione</option>
    <option value="Cumple">Cumple</option>
    <option value="No cumple">No cumple</option>
    <option value="No informa">No informa</option>
  </select>
</label><br>


    <label>Total mujeres: <input type="number" name="totalMujeres"></label>
    <label>Total hombres: <input type="number" name="totalHombres"></label>
    <label>¿Cuántos en discapacidad?: <input type="number" name="totalDiscapacidad"></label>
    <label>Observaciones: <textarea name="observaciones"></textarea></label>
    <label>Compromisos: <textarea name="compromisos"></textarea></label>

    <button type="submit">Guardar</button>
    <button type="button" onclick="window.location.href='empresas_registradas.html'">Ver empresas registradas</button>
  </form>

  <script>
    const form = document.getElementById("formEmpresa");
    let empresas = JSON.parse(localStorage.getItem("empresas")) || [];
    let indiceEditar = localStorage.getItem("indiceEditar");

    if (indiceEditar !== null) {
      const datos = empresas[indiceEditar];
      if (datos) {
        for (const campo in datos) {
          if (form.elements[campo]) {
            form.elements[campo].value = datos[campo];
          }
        }
      }
      
    }

    form.addEventListener("submit", function(e) {
      e.preventDefault();
      const nuevaEmpresa = {};

      for (const el of form.elements) {
        if (el.name) {
          nuevaEmpresa[el.name] = el.value;
        }
      }

      if (indiceEditar !== null) {
        empresas[indiceEditar] = nuevaEmpresa;
        localStorage.removeItem("indiceEditar");
        indiceEditar = null;
        alert("Empresa editada correctamente.");
      } else {
        empresas.push(nuevaEmpresa);
        alert("Empresa registrada correctamente.");
      }

      localStorage.setItem("empresas", JSON.stringify(empresas));
      form.reset();
      form.elements['fecha'].focus();
    });
  </script>

</body>
</html>
